webpackJsonp([66],{AvX4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),o=a("NYxO"),i=a("t5DY"),r=a("wvJD"),l=a("4/BI"),c={data:function(){return{isShowButton:!0,loading:!1,loadingTop:!1,downloadLoading:!1,dialogVisible_add:!1,unissuedNum:"",tableData:[],tableDataTop:[],account:"",orderId:"",coinId:"",username:"",incomeObj:{module:"27",currency:""},searchObj:{username:"",period:[],coinType:"",status:""},mine_obj:{id:"",hashPlanName:"",contract:"",username:"",planName:"",recovery:"",status:"",incomeDate:""},rules:{},page:{pageNum:1,pageSize:20,totalCount:""},optionsCoin:[],optionsStatus:[]}},created:function(){this.getlistCoin(),this.getStatusList(),this.init()},computed:s()({},Object(o.b)(["name","roles","token","admin"])),filters:{formatCoinType:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return formatCoinType(t)}),statusFilter:function(t){return{0:"danger",1:"success"}[t]},formatStata:function(t){return{0:"未发放",1:"已发放"}[t]},formatDate:function(t){if(t){var e=new Date(t);return Object(l.b)(e,"yyyy-MM-dd hh:mm:ss")}}},methods:{search_submit:function(t){var e=this,a={username:this.searchObj.username,startTime:this.searchObj.period[0],endTime:this.searchObj.period[1],coinType:this.searchObj.coinType,status:this.searchObj.status};this.initTop(a),this.$refs[t].validate(function(t){t&&(e.loading=!0,Object(r.u)(e.page.pageNum,e.page.pageSize,a).then(function(t){e.loading=!1,t.data.type?(e.tableData=t.data.body.result,e.page.pageNum=t.data.body.pageNum,e.page.pageSize=t.data.body.pageSize,e.page.totalCount=t.data.body.totalCount):e.$message.error(t.data.body)}))})},init:function(){var t=this,e={username:this.searchObj.username,startTime:this.searchObj.period[0],endTime:this.searchObj.period[1],coinType:this.searchObj.coinType,status:this.searchObj.status};this.loading=!0,this.initTop(e),Object(r.u)(this.page.pageNum,this.page.pageSize,e).then(function(e){t.loading=!1,e.data.type?(t.tableData=e.data.body.result,t.page.pageNum=e.data.body.pageNum,t.page.pageSize=e.data.body.pageSize,t.page.totalCount=e.data.body.totalCount):t.$message.error(e.data.body)})},initTop:function(t){var e=this;this.loadingTop=!0,Object(r.n)(t).then(function(t){e.loadingTop=!1,t.data.type?e.tableDataTop=t.data.body:e.$message.error(t.data.body)})},modifyStatus:function(t){var e=this;this.$confirm("全部发放, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(a){if("confirm"==a){var n={username:e.searchObj.username,startTime:e.searchObj.period[0],endTime:e.searchObj.period[1],coinType:e.searchObj.coinType,status:e.searchObj.status};Object(r.c)(t,n).then(function(t){t.data.type?(e.$message.success("发放成功！"),e.init()):e.$message.error(t.data.body)})}}}).then(function(t){"confirm"==t&&e.$message({type:"success",message:"发放成功!"})}).catch(function(){e.$message({type:"info",message:"已取消发放"})})},handleSizeChange:function(t){this.page.pageSize=t,this.init()},handleCurrentChange:function(t){this.page.pageNum=t,this.init()},getlistCoin:function(){var t=this;Object(i.b)({}).then(function(e){e.data.type?t.optionsCoin=e.data.body:t.$message.error(e.data.body)})},getStatusList:function(){var t=this;Object(i.c)({paraKey:"income_pay_status"}).then(function(e){e.data.type?t.optionsStatus=e.data.body:t.$message.error(e.data.body)})},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e(74),a.e(73)]).then(a.bind(null,"zWO4")).then(function(e){var a=t.formatJson(["timestamp","title","type","importance","status"],t.tableData);e.export_json_to_excel({header:["timestamp","title","type","importance","status"],data:a,filename:"table-list"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){})})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"search"},[a("el-form",{ref:"searchObj",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchObj,rules:t.rules}},[a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.searchObj.username,callback:function(e){t.$set(t.searchObj,"username",e)},expression:"searchObj.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"记账时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.searchObj.period,callback:function(e){t.$set(t.searchObj,"period",e)},expression:"searchObj.period"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"币种"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.searchObj.coinType,callback:function(e){t.$set(t.searchObj,"coinType",e)},expression:"searchObj.coinType"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.optionsCoin,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.searchObj.status,callback:function(e){t.$set(t.searchObj,"status",e)},expression:"searchObj.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.optionsStatus,function(t){return a("el-option",{key:t.id,attrs:{label:t.paraName,value:t.id}})})],2)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.search_submit("searchObj")}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"breadcrumbs"},[t._v("综合信息")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTop,expression:"loadingTop"}],staticClass:"mt_20",staticStyle:{width:"100%"},attrs:{data:t.tableDataTop,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"coinName",label:"币种名称","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num",label:"总笔数","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sum",label:"发放数量","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"notNum",label:"未发放总笔数","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"notSum",label:"未发放数量","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.notSum?a("el-button",{key:e.$index,attrs:{type:"primary"},on:{click:function(a){t.modifyStatus(e.row.coinId)}}},[t._v("发放")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"breadcrumbs"},[t._v("详细信息")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt_20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"",sortable:""}},[a("el-table-column",{attrs:{fixed:"left",prop:"username",label:"用户名","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"hashPlanName",label:"算力名称","min-width":"150",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"收益数量","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"币价","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"coinName",label:"币种名称","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"account",label:"收益地址","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"支付日期",prop:"payDate",sortable:"","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.payDate?a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t._f("formatDate")(e.row.payDate)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"payUserName",label:"发放人","min-width":"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"记账时间",prop:"orderDate",sortable:"","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.orderDate?a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t._f("formatDate")(e.row.orderDate)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"statusName",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return["发放"==e.row.statusName?a("el-tag",{attrs:{size:"mini",type:"success"}},[t._v(t._s(e.row.statusName))]):"未发放"==e.row.statusName?a("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v(t._s(e.row.statusName))]):a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(e.row.statusName))])]}}])})],1),t._v(" "),t.tableData.length?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.page.pageNum,"page-sizes":[20,50,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:parseInt(t.page.totalCount)},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)},staticRenderFns:[]};var p=a("VU/8")(c,u,!1,function(t){a("AyUx")},null,null);e.default=p.exports},AyUx:function(t,e,a){var n=a("dOYC");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("5343eeb7",n,!0)},dOYC:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.block {\n        text-align: center;\n        margin-top: 20px\n}\n.content {\n        background: #fff\n}\n.mt_20 {\n        margin-top: 20px\n}\n.breadcrumbs{border-left: 5px solid #253340; padding-left: 5px;margin-top: 30px;\n}\n",""])}});
