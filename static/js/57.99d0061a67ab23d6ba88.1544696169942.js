webpackJsonp([57],{JXOi:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\nimg[data-v-4be18476]{width: 100%\n}\n.avatar[data-v-4be18476]{\n  width: 200px;\n  height: 200px;\n  border-radius: 50%;\n}\n",""])},"d+kq":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),s=a("mvHQ"),l=a.n(s),n=a("Dd8w"),r=a.n(n),u=a("NYxO"),c=(a("7t+N"),a("aWnr")),d=a("wvJD"),b=(a("t5DY"),a("4/BI")),m={data:function(){return{showImg:!1,imgSrc:"",src:"https://afp.alicdn.com/afp-creative/creative/u124884735/14945f2171400c10764ab8f3468470e4.jpg",isShow:!0,loading:!1,thumbnail:[],dialogVisible_edit:!1,dialogVisible_upload:!1,dialogVisible_status:!1,tableData:[],mine_obj:{id:"",hashPlanName:"",status:"",remark:"",contract:"",pic:"",picSrc:"https://afp.alicdn.com/afp-creative/creative/u124884735/14945f2171400c10764ab8f3468470e4.jpg",buyDate:[]},rules:{},page:{pageNO:1,pageSize:20,totalCount:""},options:[],optionsWorker:[]}},components:{},created:function(){this.init()},filters:{formatCoinType:function(t){return Object(b.a)(t)},statusFilter:function(t){return{0:"danger",1:"success",2:"info"}[t]},formatStata:function(t){return{0:"未支付",1:"已支付",2:"取消订单"}[t]},formatDate:function(t){var e=new Date(t);return Object(b.b)(e,"yyyy-MM-dd hh:mm:ss")}},computed:r()({},Object(u.b)(["roles","admin","name"])),methods:{clickImg:function(t){this.showImg=!0,this.imgSrc=t.currentTarget.src},viewImg:function(){this.showImg=!1},search_submit:function(t){var e=this,a={username:this.mine_obj.username,workerModel:this.mine_obj.workerModel,beginTime:this.mine_obj.buyDate[0],endTime:this.mine_obj.buyDate[1],status:this.mine_obj.status},i={pageNO:this.page.pageNO,pageSize:this.page.pageSize,search:l()(a)};this.$refs[t].validate(function(t){t&&(e.loading=!0,Object(c.e)(i).then(function(t){if(e.loading=!1,t.data.type){e.tableData=t.data.body.result;for(var a=0;a<e.tableData.length;a++)e.tableData[a].proof&&(e.tableData[a].proof="hash/"+e.tableData[a].proof);e.page.pageNO=t.data.body.pageNum,e.page.pageSize=t.data.body.pageSize,e.page.totalCount=t.data.body.totalCount}else e.$message.error(t.data.body)}))})},init:function(){var t=this,e={username:this.mine_obj.username,workerModel:this.mine_obj.workerModel,beginTime:this.mine_obj.buyDate[0],endTime:this.mine_obj.buyDate[1],status:this.mine_obj.status},a={pageNO:this.page.pageNO,pageSize:this.page.pageSize,search:l()(e)};this.loading=!0,Object(c.e)(a).then(function(e){if(t.loading=!1,e.data.type){t.tableData=e.data.body.result;for(var a=0;a<t.tableData.length;a++)t.tableData[a].proof&&(t.tableData[a].proof="hash/"+t.tableData[a].proof);t.page.pageNO=e.data.body.pageNum,t.page.pageSize=e.data.body.pageSize,t.page.totalCount=e.data.body.totalCount}else t.$message.error(e.data.body)})},handleStatus:function(t,e){this.dialogVisible_status=!0,this.mine_obj=o()({},e)},status_submit:function(t){var e=this,a=o()({},this.mine_obj),i={orderId:a.id,status:a.status,remark:a.remark};this.$refs[t].validate(function(t){t&&Object(d.E)(i).then(function(t){t.data.type?(e.$message.success("提交成功！"),e.dialogVisible_status=!1,e.init()):e.$message.error("提交失败！")})})},handleUpload:function(t,e){this.dialogVisible_upload=!0,this.mine_obj=e,this.mine_obj=e},beforeRemove:function(t,e){},beforeupload:function(t){var e=window.URL||window.webkitURL;return this.src=e.createObjectURL(t),this.mine_obj.pic=new FormData,this.mine_obj.pic.append("file",t,t.name),!1},httprequest:function(){},upload_submit:function(t){var e=this,a=o()({},this.mine_obj);this.$refs[t].validate(function(t){t&&(e.mine_obj.pic?Object(d.g)(e.mine_obj.pic,a.id).then(function(t){t.data.type?(e.$message.success("提交成功！"),e.dialogVisible_upload=!1,e.init()):e.$message.error("提交失败！")}):e.$message.error("请选择图片！"))})},cancle:function(){this.isShow=!0,this.init()},handleSizeChange:function(t){this.page.pageSize=t,this.init()},handleCurrentChange:function(t){this.page.pageNO=t,this.init()},modifyStatus:function(t){var e=this;this.$confirm("取消订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(a){"confirm"==a&&Object(c.b)(t).then(function(t){t.data.type?(e.$message.success("取消成功！"),e.dialogVisible_status=!1,e.init()):e.$message.error(t.data.body)})}}).then(function(t){"confirm"==t&&e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]},[a("div",{staticClass:"search"},[a("el-form",{ref:"mine_obj",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.mine_obj,rules:t.rules}},[a("el-form-item",{attrs:{label:t.$t("backPool.userName")}},[a("el-input",{attrs:{placeholder:""},model:{value:t.mine_obj.username,callback:function(e){t.$set(t.mine_obj,"username",e)},expression:"mine_obj.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("backPool.model")}},[a("el-input",{attrs:{placeholder:""},model:{value:t.mine_obj.workerModel,callback:function(e){t.$set(t.mine_obj,"workerModel",e)},expression:"mine_obj.workerModel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("backPool.orderDate")}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:t.mine_obj.buyDate,callback:function(e){t.$set(t.mine_obj,"buyDate",e)},expression:"mine_obj.buyDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("backPool.orderStatus")}},[a("el-select",{attrs:{placeholder:""},model:{value:t.mine_obj.status,callback:function(e){t.$set(t.mine_obj,"status",e)},expression:"mine_obj.status"}},[a("el-option",{attrs:{label:t.$t("backPool.all"),value:""}}),t._v(" "),a("el-option",{attrs:{label:t.$t("backPool.unpaid"),value:"0"}}),t._v(" "),a("el-option",{attrs:{label:t.$t("backPool.paid"),value:"1"}}),t._v(" "),a("el-option",{attrs:{label:t.$t("backPool.cancelOrder"),value:"2"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.search_submit("mine_obj")}}},[t._v(t._s(t.$t("back.query")))])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt_20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{sortable:"",fixed:"left",prop:"username",label:t.$t("backPool.userName"),width:"120"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"workerModel",label:t.$t("backPool.model"),"min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"copies",label:t.$t("backPool.quantity"),width:"100"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"price",label:t.$t("backPool.unitPrice"),width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("backPool.totalPrices")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.price*e.row.copies)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("backPool.orderDate"),prop:"date",sortable:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t._f("formatDate")(e.row.date)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"picture","header-align":"center",align:"center",width:"150px",label:t.$t("backPool.paymentVochuer")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.proof?a("img",{staticStyle:{"max-height":"50px","max-width":"130px"},attrs:{src:e.row.proof,alt:e.row.proof},on:{click:function(e){t.clickImg(e)}}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("backPool.uploadPaymentVochuer")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?t._e():a("el-button",{key:e.$index,attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleUpload(e.$index,e.row)}}},[t._v(t._s(t.$t("back.upload")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("backPool.orderStatus"),prop:"status",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.admin?a("div",[a("a",{key:e.$index,attrs:{href:"javascript:void(0)"},on:{click:function(a){t.handleStatus(e.$index,e.row)}}},[a("el-tag",{attrs:{size:"mini",type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(t._f("formatStata")(e.row.status)))])],1)]):a("div",[e.row.status?a("a",{attrs:{href:"javascript:void(0)"}},[a("el-tag",{attrs:{size:"mini",type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(t._f("formatStata")(e.row.status)))])],1):a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){t.modifyStatus(e.row.id)}}},[a("el-tag",{attrs:{size:"mini",type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(t._f("formatStata")(e.row.status)))])],1)])]}}])})],1),t._v(" "),t.tableData.length?a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.page.pageNum,"page-sizes":[20,50,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:parseInt(t.page.totalCount)},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogVisible_status},on:{"update:visible":function(e){t.dialogVisible_status=e}}},[a("el-form",{ref:"mine_obj",attrs:{model:t.mine_obj,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:t.mine_obj.status,callback:function(e){t.$set(t.mine_obj,"status",e)},expression:"mine_obj.status"}},[a("el-radio",{attrs:{label:0}},[t._v("未支付")]),t._v(" "),t.admin?a("el-radio",{attrs:{label:1}},[t._v("已支付")]):t._e(),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("取消订单")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态变更原因",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.mine_obj.remark,callback:function(e){t.$set(t.mine_obj,"remark",e)},expression:"mine_obj.remark"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.status_submit("mine_obj")}}},[t._v("修改")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible_status=!1}}},[t._v("取消")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"上传凭证",visible:t.dialogVisible_upload},on:{"update:visible":function(e){t.dialogVisible_upload=e}}},[a("el-form",{ref:"mine_obj",attrs:{model:t.mine_obj,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"上传图片",prop:""}},[a("el-upload",{staticClass:"upload-demo",attrs:{"before-upload":t.beforeupload,drag:"",action:""}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"预览图片",prop:""}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.src,alt:""}})]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.upload_submit("mine_obj")}}},[t._v("上传")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible_upload=!1}}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(m,p,!1,function(t){a("ydr/")},"data-v-4be18476",null);e.default=f.exports},"ydr/":function(t,e,a){var i=a("JXOi");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("78da584f",i,!0)}});
