webpackJsonp([70],{YN9n:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),n=i("aWnr"),o=i("t5DY"),l=i("4/BI"),r={data:function(){return{isShow:!0,loading:!1,dialogVisible_editOpt:!1,dialogVisible_edit:!1,dialogVisible_add:!1,dialogVisible_status:!1,tableData:[],page:{pageNO:1,pageSize:20,totalCount:"",order:"",sort:""},inventoryObj:{id:"",productId:"",costPrice:"",instock:"",sellPrice:"",status:"",remark:""},rules:{},optionsWorker:[],optionsStatus:[]}},created:function(){this.init()},filters:{formatDate:function(t){if(t){var e=new Date(t);return Object(l.b)(e,"yyyy-MM-dd hh:mm:ss")}}},components:{},methods:{init:function(){var t=this;this.loading=!0,Object(n.d)(this.page.pageNO,this.page.pageSize,{}).then(function(e){t.loading=!1,e.data.type?(t.tableData=e.data.body.result,t.page.pageNO=e.data.body.pageNum,t.page.pageSize=e.data.body.pageSize,t.page.totalCount=e.data.body.totalCount):t.$message.error(e.data.body)})},handleAdd:function(){this.inventoryObj={},this.dialogVisible_add=!0,this.getNewsStatus(),this.getlistAllWorker()},add_submit:function(t){var e=this,i={productId:this.inventoryObj.productId,costPrice:this.inventoryObj.costPrice,instock:this.inventoryObj.instock,sellPrice:this.inventoryObj.sellPrice,status:this.inventoryObj.status};this.$refs[t].validate(function(t){t&&Object(n.a)(i).then(function(t){t.data.type?(e.$message.success("提交成功！"),e.dialogVisible_add=!1,e.init()):e.$message.error(t.data.body)})})},handleEditOpt:function(t,e){this.dialogVisible_editOpt=!0,this.inventoryObj=s()({},e),this.getNewsStatus(),this.getlistAllWorker()},editOpt_submit:function(t){var e=this,i={id:this.inventoryObj.id,productId:this.inventoryObj.productId,costPrice:this.inventoryObj.costPrice,instock:this.inventoryObj.instock,sellPrice:this.inventoryObj.sellPrice,status:this.inventoryObj.status};this.$refs[t].validate(function(t){t&&Object(n.f)(i).then(function(t){t.data.type?(e.$message.success("提交成功！"),e.dialogVisible_editOpt=!1,e.init()):e.$message.error(t.data.body)})})},handleStatus:function(t,e){this.dialogVisible_status=!0,this.inventoryObj=s()({},e),this.getNewsStatus()},status_submit:function(t){var e=this,i=s()({},this.inventoryObj),a={id:i.id,status:i.status,remark:i.remark};this.$refs[t].validate(function(t){t&&Object(n.c)(a).then(function(t){t.data.type?(e.$message.success("提交成功！"),e.dialogVisible_status=!1,e.init()):e.$message.error(t.data.body)})})},handleSizeChange:function(t){this.page.pageSize=t,this.init()},handleCurrentChange:function(t){this.page.pageNO=t,this.init()},cancle:function(){this.isShow=!0,this.init()},getlistAllWorker:function(){var t=this;Object(o.g)({}).then(function(e){e.data.type?t.optionsWorker=e.data.body:t.$message.error(e.data.body)})},getNewsStatus:function(){var t=this;Object(o.c)({paraKey:"product_content_status"}).then(function(e){e.data.type?t.optionsStatus=e.data.body:t.$message.error(e.data.body)})}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]},[i("el-button",{staticClass:"addButton",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("入库")]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt_20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{sortable:"",fixed:"left",prop:"model",label:"型号","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{sortable:"custom",prop:"count",label:"库存数量",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"outstock",label:"销售数量",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"instock",label:"入库数量",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"入库日期",prop:"date",sortable:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t._f("formatDate")(e.row.date)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"costPrice",label:"成本价"}}),t._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"sellPrice",label:"销售价"}}),t._v(" "),i("el-table-column",{attrs:{label:"入库人",prop:"adminName",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.adminName?i("el-tag",{attrs:{size:"mini"}},[t._v(t._s(e.row.adminName))]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"statusName",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return["上架"==e.row.statusName?i("el-tag",{key:e.$index,attrs:{size:"mini",type:"success"},on:{click:function(i){t.handleStatus(e.$index,e.row)}}},[t._v(t._s(e.row.statusName))]):"下架"==e.row.statusName?i("el-tag",{key:e.$index,attrs:{size:"mini",type:"danger"},on:{click:function(i){t.handleStatus(e.$index,e.row)}}},[t._v(t._s(e.row.statusName))]):"发布"==e.row.statusName?i("el-tag",{key:e.$index,attrs:{size:"mini"},on:{click:function(i){t.handleStatus(e.$index,e.row)}}},[t._v(t._s(e.row.statusName))]):i("el-tag",{key:e.$index,attrs:{size:"mini",type:"info"},on:{click:function(i){t.handleStatus(e.$index,e.row)}}},[t._v(t._s(e.row.statusName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{key:e.$index,attrs:{size:"mini",type:"primary"},on:{click:function(i){t.handleEditOpt(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.page.pageNO,"page-sizes":[20,50,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:parseInt(t.page.totalCount)},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"添加",visible:t.dialogVisible_add},on:{"update:visible":function(e){t.dialogVisible_add=e}}},[i("el-form",{ref:"inventoryObj",attrs:{model:t.inventoryObj,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"矿机型号",prop:"productId"}},[i("el-select",{attrs:{placeholder:"请选择矿机"},model:{value:t.inventoryObj.productId,callback:function(e){t.$set(t.inventoryObj,"productId",e)},expression:"inventoryObj.productId"}},t._l(t.optionsWorker,function(t){return i("el-option",{key:t.id,attrs:{label:t.model,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"入库数量",prop:"instock"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-input",{model:{value:t.inventoryObj.instock,callback:function(e){t.$set(t.inventoryObj,"instock",e)},expression:"inventoryObj.instock"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[i("span",[t._v("台")])])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"成本价",prop:"costPrice"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-input",{model:{value:t.inventoryObj.costPrice,callback:function(e){t.$set(t.inventoryObj,"costPrice",e)},expression:"inventoryObj.costPrice"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[i("span",[t._v("元")])])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"销售价",prop:"sellPrice"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-input",{model:{value:t.inventoryObj.sellPrice,callback:function(e){t.$set(t.inventoryObj,"sellPrice",e)},expression:"inventoryObj.sellPrice"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[i("span",[t._v("元")])])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio-group",{model:{value:t.inventoryObj.status,callback:function(e){t.$set(t.inventoryObj,"status",e)},expression:"inventoryObj.status"}},t._l(t.optionsStatus,function(e){return"发布"!=e.paraName?i("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.paraName))]):t._e()}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.add_submit("inventoryObj")}}},[t._v("保存")]),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible_add=!1}}},[t._v("取消")])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:t.dialogVisible_editOpt},on:{"update:visible":function(e){t.dialogVisible_editOpt=e}}},[i("el-form",{ref:"inventoryObj",attrs:{model:t.inventoryObj,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"矿机型号",prop:"productId"}},[i("el-select",{attrs:{placeholder:"请选择矿机"},model:{value:t.inventoryObj.productId,callback:function(e){t.$set(t.inventoryObj,"productId",e)},expression:"inventoryObj.productId"}},t._l(t.optionsWorker,function(t){return i("el-option",{key:t.id,attrs:{label:t.model,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"入库数量",prop:"instock"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-input",{model:{value:t.inventoryObj.instock,callback:function(e){t.$set(t.inventoryObj,"instock",e)},expression:"inventoryObj.instock"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[i("span",[t._v("台")])])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"成本价",prop:"costPrice"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-input",{model:{value:t.inventoryObj.costPrice,callback:function(e){t.$set(t.inventoryObj,"costPrice",e)},expression:"inventoryObj.costPrice"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[i("span",[t._v("元")])])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"销售价",prop:"sellPrice"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("el-input",{model:{value:t.inventoryObj.sellPrice,callback:function(e){t.$set(t.inventoryObj,"sellPrice",e)},expression:"inventoryObj.sellPrice"}})],1),t._v(" "),i("el-col",{attrs:{span:5}},[i("span",[t._v("元")])])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio-group",{model:{value:t.inventoryObj.status,callback:function(e){t.$set(t.inventoryObj,"status",e)},expression:"inventoryObj.status"}},t._l(t.optionsStatus,function(e){return i("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.paraName))])}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editOpt_submit("inventoryObj")}}},[t._v("保存")]),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible_editOpt=!1}}},[t._v("取消")])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:t.dialogVisible_status},on:{"update:visible":function(e){t.dialogVisible_status=e}}},[i("el-form",{ref:"inventoryObj",attrs:{model:t.inventoryObj,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio-group",{model:{value:t.inventoryObj.status,callback:function(e){t.$set(t.inventoryObj,"status",e)},expression:"inventoryObj.status"}},t._l(t.optionsStatus,function(e){return i("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.paraName))])}))],1),t._v(" "),i("el-form-item",{attrs:{label:"状态变更原因",prop:"remark"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.inventoryObj.remark,callback:function(e){t.$set(t.inventoryObj,"remark",e)},expression:"inventoryObj.remark"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.status_submit("inventoryObj")}}},[t._v("修改")]),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible_status=!1}}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]},u=i("VU/8")(r,c,!1,null,null,null);e.default=u.exports}});
